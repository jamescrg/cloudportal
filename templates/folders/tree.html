<ul class="list-group folder-tree">
    <li class="list-group-item folder-item {% if not selected_folder and not favorites_folder_all and not notes_folder_all and not tasks_folder_all and not contacts_folder_all %}active-item{% endif %}">
        <div class="folder-row">
            <div class="folder-content">
                <span class="folder-icon">
                    <i class="icon-inbox"></i>
                </span>
                <a class="folder-link"
                   href="#"
                   hx-get="{% url 'folder-select-htmx' id=0 page=page %}"
                   hx-target="#main-content"
                   hx-swap="innerHTML">Inbox</a>
                {% if inbox_count %}<span class="folder-count">{{ inbox_count }}</span>{% endif %}
            </div>
        </div>
    </li>
    {% if page == "favorites" or page == "notes" or page == "tasks" or page == "contacts" %}
        <li class="list-group-item folder-item {% if favorites_folder_all or notes_folder_all or tasks_folder_all or contacts_folder_all %}active-item{% endif %}">
            <div class="folder-row">
                <div class="folder-content">
                    <span class="folder-icon">
                        <i class="icon-folders"></i>
                    </span>
                    <a class="folder-link"
                       href="#"
                       hx-get="{% if page == 'favorites' %}{% url 'favorites-all' %}{% elif page == 'tasks' %}{% url 'tasks-all' %}{% elif page == 'contacts' %}{% url 'contacts-all' %}{% else %}{% url 'notes:all' %}{% endif %}"
                       hx-target="#main-content"
                       hx-swap="innerHTML">All
                        {% if page == 'tasks' %}
                            Tasks
                        {% elif page == 'favorites' %}
                            Favorites
                        {% elif page == 'notes' %}
                            Notes
                        {% elif page == 'contacts' %}
                            Contacts
                        {% endif %}
                    </a>
                    {% if all_count %}<span class="folder-count">{{ all_count }}</span>{% endif %}
                </div>
            </div>
        </li>
    {% endif %}
    {% for folder in folders %}
        <li class="list-group-item folder-item {% if folder.id == selected_folder.id %}active-item{% endif %}"
            id="folder-{{ folder.id }}"
            data-folder-name="{{ folder.name }}"
            data-folder-owner="{{ folder.user_id }}">
            <div class="folder-row">
                <div class="folder-content">
                    {% if folder.home_column and folder.user == user %}
                        <span class="folder-icon-home">
                            <i class="icon-house"></i>
                        </span>
                    {% else %}
                        <span class="folder-icon">
                            <i class="icon-folder"></i>
                        </span>
                    {% endif %}
                    <a class="folder-link"
                       href="#"
                       hx-get="{% url 'folder-select-htmx' id=folder.id page=page %}"
                       hx-target="#main-content"
                       hx-swap="innerHTML">{{ folder.name }}</a>
                    {% if folder.editors.all %}
                        <span class="shared-indicator"
                              title="Shared with {{ folder.editors.count }} user{{ folder.editors.count|pluralize }}">
                            <i class="icon-users"></i>
                        </span>
                    {% endif %}
                    {% if folder.item_count %}<span class="folder-count">{{ folder.item_count }}</span>{% endif %}
                </div>
                {% include "folders/menu.html" with folder=folder %}
            </div>
        </li>
    {% endfor %}
</ul>
